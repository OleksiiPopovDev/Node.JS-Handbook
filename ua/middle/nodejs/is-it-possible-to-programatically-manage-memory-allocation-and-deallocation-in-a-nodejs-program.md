#### 75. Чи можливо програмно контролювати виділення і звільнення пам’яті в Node.js програмі?

Так, у Node.js можна програмно контролювати виділення і звільнення пам'яті, хоча важливо зазначити, що це не є такою ж прямою операцією, як в деяких інших мовах програмування, таких як C або C++. Node.js використовує систему керування пам'яттю, засновану на збирачі сміття в JavaScript-движку V8, який автоматично керує виділенням і звільненням пам'яті. Однак існує кілька способів контролювати та оптимізувати управління пам'яттю:

1. **Виклик `global.gc()`:** Якщо запустити Node.js з прапором `--expose-gc`, можна вручну запускати збирач сміття, використовуючи `global.gc()`. Це може бути корисно для тестування та налагодження, однак слід бути обережним через можливий вплив на продуктивність.

   ```bash
   node --expose-gc your_script.js
   ```

   ```javascript
   if(global.gc) {
     global.gc();
   } else {
     console.warn('Запустіть Node.js з прапором `--expose-gc`');
   }
   ```

2. **Моніторинг використання пам'яті:** Ви можете використовувати `process.memoryUsage()` для отримання інформації про використання пам'яті вашим додатком:

   ```javascript
   const memoryUsage = process.memoryUsage();
   console.log(memoryUsage);
   ```

3. **Оптимізація коду:** Перегляньте ваш код на наявність погано оптимізованих структур даних, нерелевантних об’єктів, та звільніть від них оперативну пам’ять. Мінімізуйте кількість глобальних об’єктів та циклічних посилань.

4. **Буферизація та потоки:** Користуйтесь потоками читання та запису даних, коли це можливо, замість того, щоб завантажувати великі дані в пам'ять.

5. **Спеціалізовані бібліотеки:** Використовуйте бібліотеки, такі як `memwatch-next`, для виявлення витоків пам'яті та моніторингу використання пам'яті.

Ці методи та підходи дозволяють вам мати більший контроль над витратами пам'яті в Node.js, але слід пам'ятати, що збирач сміття все ще є основним засобом керування пам’яттю.

| Back | Forward |
|---|---|
| [Які існують шаблони розподілених транзакцій?](/ua/middle/nodejs/what-are-the-existing-distributed-transaction-patterns.md)  | [Поясніть, що таке Garbage Collector.](/ua/middle/nodejs/what-is-a-garbage-collector.md) |