#### 84. Що таке middleware? Якщо ми пишемо свій middleware, чому саме там, чому не в коді сервісу?

Middleware у Node.js, зокрема у фреймворках на кшталт Express, — це проміжний обробник, функція, яка виконується під час обробки HTTP-запиту. Middleware може виконувати різноманітні завдання: обробляти запити, відповідати на запити, а також змінювати запити або відповіді для подальшої обробки.

### Причини використання middleware замість коду сервісу:

1. **Відокремлення обов'язків**: Middleware дозволяє відокремити різні функціональні аспекти додатку (такі як аутентифікація, логування, обробка помилок) від основної логіки додатку, роблячи код більш організованим та легким для підтримки.

2. **Повторне використання**: Middleware легко повторно використовувати в різних частинах програми або навіть в інших програмах. Ви можете створити індивідуальний middleware для загальних завдань і підключати його там, де це необхідно.

3. **Ланцюгова обробка**: Middleware часто використовуються в ланцюгах, де запит чи відповідь можуть бути оброблені кількома middleware послідовно. Це дозволяє зручно реалізовувати обробку в кілька етапів, де кожен middleware має свою власну зону відповідальності.

4. **Гнучкість**: Middleware можуть бути додані або видалені без необхідності значних змін в логіці основного коду сервісу. Це дозволяє легко адаптувати поведінку програми до змін у вимогах.

5. **Управління потоком**: Middleware можуть припинити обробку запиту або передати його наступній функції в ланцюгу за допомогою виклику `next()`. Це дає можливість більш гнучко контрольовувати порядок обробки.

Отже, використання middleware забезпечує чіткий поділ логіки програми, сприяє багатократному використанню коду та покращує керованість програми.

| Back | Forward |
|---|---|
| [Скільки ядер процесора залучені при виконанні Node.js програми за замовчуванням?](/ua/middle/nodejs/how-many-cpu-cores-are-used-by-default-when-running-a-nodejs-program.md)  | [Що таке EventEmitter в Node.js?](/ua/middle/nodejs/what-is-eventemitter-in-nodejs.md) |