#### 126. Яким чином ви б спроєктували API для bulk delete?

Створення API для масового видалення (bulk delete) може бути ефективним способом зменшення кількості запитів до сервера, особливо коли потрібно одночасно видалити кілька записів. Ось як можна спроєктувати такий API:

### HTTP Method
Використовуйте метод DELETE, що є стандартом для видалення, або метод POST, якщо хочете передати дані в тілі запиту.

### URL
```
DELETE /api/resources

POST /api/resources/bulk-delete
```

### Параметри
Ви можете передавати ідентифікатори записів, які потрібно видалити:

#### Опція 1: Query Parameters (для DELETE)
```
DELETE /api/resources?ids=1,2,3,4,5
```

#### Опція 2: Request Body (для POST)
```json
POST /api/resources/bulk-delete
Content-Type: application/json

{
  "ids": [1, 2, 3, 4, 5]
}
```

### Відповідь
- **200 OK** - якщо всі записи було успішно видалено.
- **207 Multi-Status** - якщо для деяких записів видалення було успішним, а для деяких ні. В цьому випадку можна повернути детальну інформацію про кожен запис.
- **400 Bad Request** - якщо передано неправильні дані.
- **404 Not Found** - якщо один або кілька записів не знайдено.

#### Приклад відповіді (207 Multi-Status)
```json
{
  "results": [
    {"id": 1, "status": "deleted"},
    {"id": 2, "status": "not_found"},
    {"id": 3, "status": "deleted"},
    {"id": 4, "status": "error", "message": "Database error"},
    {"id": 5, "status": "deleted"}
  ]
}
```

### Безпека
Забезпечте аутентифікацію та авторизацію, щоб уникнути несанкціонованих запитів на видалення даних. 

### Додаткові рекомендації
- **Валідація**: Перед видаленням перевіряйте, чи мають користувачі право на видалення зазначених записів.
- **Логування**: Логуйте спроби видалення, щоб легко відстежувати збої або несанкціоновану активність.
- **Скасування змін**: Розгляньте можливість реалізації резервного копіювання або методів відновлення видалених даних.

Цей підхід допоможе забезпечити ефективність та безпеку під час реалізації масового видалення через API.

| Back | Forward |
|---|---|
| [Яка різниця між GraphQL і REST?](/ua/middle/networking/whats-the-difference-between-graphql-and-rest.md)  | [Що таке теорема CAP?](/ua/middle/system-design/what-is-the-cap-theorem.md) |