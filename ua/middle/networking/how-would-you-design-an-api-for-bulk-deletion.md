#### 126. Яким чином ви б спроєктували API для bulk delete?

Проєктування API для bulk delete (масового видалення) є важливим аспектом, який потрібно ретельно обдумати, щоб забезпечити ефективність, безпеку та ясність використання. Ось кроки та рекомендації, які варто враховувати при створенні такого API:

### 1. HTTP Метод

- **DELETE**: Найочевидніший вибір для видалення, однак стандартний `DELETE` зазвичай призначений для видалення одного елементу. Для масового видалення можна використовувати інші HTTP методи.
- **POST**: Використовується замість `DELETE` для того, щоб передати складні запити, зокрема ідентифікатори об'єктів для видалення в тілі запиту.

### 2. Структура URL

Обирайте таку структуру, яка ясно показує, що ви працюєте з множиною об'єктів:
```
POST /api/items/bulk-delete
```

### 3. Формат Запиту

Передавайте ідентифікатори ресурсів для видалення в тілі запиту у форматі JSON:
```json
{
  "ids": [1, 2, 3, 4, 5]
}
```

### 4. Валідація

- **Перевірка Ідентифікаторів**: Переконайтеся, що всі передані ідентифікатори є дійсними і належать користувачу (якщо необхідно).
- **Перевірка Дозволів**: Перед видаленням перевірте, чи має користувач достатні права на це.

### 5. Логування

Зберігайте інформацію про масові видалення для аудиту та відновлення, якщо це потрібно.

### 6. Відповідь API

Забезпечте інформативну відповідь, яка вказує на результат операції:
```json
{
  "deleted": [1, 2, 3],
  "not_found": [4, 5],
  "errors": {
    "3": "Access denied"
  }
}
```

### 7. Транзакції

Якщо видалення взаємопов’язаних об’єктів може створити неконсистентність, використовуйте транзакції, щоб або всі видалення були успішними, або жодне з них.

### 8. Масштабованість

Дбайте про те, щоб API міг обробляти великі набори даних. Це може включати обмеження на кількість об'єктів у запиті або реалізацію асинхронного видалення для дуже великої кількості елементів.

### 9. Документування

Надайте детальну документацію з прикладами, щоб користувачі API розуміли, як правильно сформувати запит і які відповіді очікувати. 

Ретельно сплановане API для bulk delete допомагає уникнути труднощів і забезпечує зрозумілий та ефективний спосіб взаємодії з системою.

| Back | Forward |
|---|---|
| [Яка різниця між GraphQL і REST?](/ua/middle/networking/whats-the-difference-between-graphql-and-rest.md)  | [Що таке теорема CAP?](/ua/middle/system-design/what-is-the-cap-theorem.md) |