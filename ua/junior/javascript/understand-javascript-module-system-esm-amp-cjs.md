#### 58. Understand JavaScript module system (ESM and CommonJS)

JavaScript пропонує два основні підходи для організації коду в окремі модулі: ESM (ECMAScript Modules) та CommonJS. Кожен із цих підходів має свої особливості та способи застосування.

### ECMAScript Modules (ESM)

ESM є стандартом для модульної системи в JavaScript, інтегрованим в ECMAScript 6 (ES6). Він підтримується в сучасних браузерах і Node.js. Основні характеристики:

- **Імпорт та експорт**:
  - Використовується синтаксис `import` та `export`.
  - Можна експортувати значення за допомогою `export`, і імпортувати їх через `import` в іншому модулі.

    ```javascript
    // module.js
    export const greeting = "Hello, World!";
    
    // main.js
    import { greeting } from './module.js';
    console.log(greeting); // Виведе: Hello, World!
    ```

- **Асинхронне завантаження**: Браузери завантажують ESM модулі асинхронно, що дозволяє ефективно використовувати ресурси.

- **Статична структура**: Імпорти виконуються на етапі компіляції, що дозволяє статичний аналіз коду.

- **Область видимості**: У ESM модулів є власна область видимості, тобто змінні в межах модуля не є глобальними.

### CommonJS

CommonJS є модульною системою, яка широко використовується в Node.js. Вона була створена до появи ESM і має відмінності в підходах:

- **Імпорт та експорт**:
  - Використовується `require()` для імпорту і `module.exports` для експорту.
  
    ```javascript
    // module.js
    const greeting = "Hello, World!";
    module.exports = greeting;
    
    // main.js
    const greeting = require('./module.js');
    console.log(greeting); // Виведе: Hello, World!
    ```

- **Синхронне завантаження**: В CommonJS модулі завантажуються синхронно, що може вплинути на швидкість завантаження, особливо в клієнтському середовищі.

- **Динамічна структура**: Можна виконувати імпорти на різних етапах виконання, тобто вони можуть бути умовними або вкладеними.

- **Область видимості**: Змушує кожен модуль мати свою область видимості, але на відміну від ESM, виконується під час виконання, а не компіляції.

### Основні відмінності:

1. **Синтаксис**: ESM використовує `import/export`, а CommonJS — `require/module.exports`.
2. **Час виконання**: ESM імпортує модулі на етапі компіляції, тоді як CommonJS на етапі виконання.
3. **Сумісність**: ESM є стандартом JavaScript, тому його підтримують сучасні браузери, в той час як CommonJS головним чином використовують у Node.js.

Загалом, вибір між ESM та CommonJS залежить від конкретного середовища та вимог до проекту. 

| Back | Forward |
|---|---|
| [Write simple DOM manipulation code](/ua/junior/javascript/write-a-simple-dom-manipulation-script.md)  | [Для чого потрібні бази даних у застосунках?](/ua/junior/database/what-are-databases-for-in-applications.md) |