#### 55. Understand event loop fundamentals

## Основи циклу подій в JavaScript

Цикл подій (Event Loop) — це один із ключових концептів в JavaScript, оскільки він визначає, як обробляються асинхронні операції, такі як таймери, HTTP-запити та події. Ось основні аспекти його функціонування:

### Основні концепти

1. **Одиночний потік**: JavaScript є однопоточним, тобто виконує команди в одному потоці. Це означає, що в будь-який момент часу виконується тільки одна частинка JavaScript коду.

2. **Стек викликів (Call Stack)**: Це структура даних, де зберігаються інформація про виконання функцій. Коли функція викликається, вона додається в стек викликів, і коли ця функція завершується, вона видаляється зі стека.

3. **Черга повідомлень (Callback Queue)**: Тут зберігаються всі функції зворотного виклику, які чекають на виконання після певної асинхронної операції. Ці функції чекають, доки стек викликів не стане порожнім.

4. **Цикл подій (Event Loop)**: Ця механіка відповідає за перевірку стека викликів і черги повідомлень. Якщо стек викликів порожній, цикл подій бере перший зворотний виклик з черги повідомлень і переміщує його в стек викликів для виконання.

### Процес виконання

1. JavaScript виконує код у стеку викликів.
2. Якщо потрапляє на асинхронну операцію (наприклад, `setTimeout`, HTTP-запити), у відповідний бекенд (наприклад, веб-API) відправляється задача.
3. Після завершення асинхронної операції функція зворотного виклику потрапляє у чергу повідомлень.
4. Цикл подій перевіряє, якщо стек викликів порожній, вона бере першу функцію з черги та додає її у стек викликів.

### Приклад

```javascript
console.log('Start');

setTimeout(() => {
  console.log('Timeout Callback');
}, 0);

console.log('End');
```

- Вивід буде: `Start`, `End`, `Timeout Callback`.
- Це пов'язано з тим, що `setTimeout` виконує зворотний виклик асинхронно, і він додається у чергу повідомлень для виконання після завершення всіх синхронних операцій.

### Важливі моменти

- **Асинхронність**: JavaScript не виконує асинхронні операції паралельно. Він лише ставить їх у чергу, щоб виконати пізніше.
- **Проміжок часу в setTimeout**: Навіть якщо встановити 0 мс у `setTimeout`, JavaScript виконає зворотний виклик пізніше, оскільки спочатку завершить поточний стек.

Розуміння циклу подій є критично важливим для ефективного написання асинхронного коду в JavaScript.

| Back | Forward |
|---|---|
| [Use Map and Set effectively](/ua/junior/javascript/use-maps-and-sets-efficiently.md)  | [Handle errors with try-catch and Promise chains](/ua/junior/javascript/handling-errors-with-trycatch-blocks-and-promise-chaining.md) |