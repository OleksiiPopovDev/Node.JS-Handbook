#### 22. Understand middleware purpose

Middleware у Node.js є важливим компонентом, що відіграє ключову роль у обробці HTTP-запитів перед тим, як вони будуть оброблені остаточною функцією маршрутизації. Ось основні цілі та ролі middleware:

1. **Обробка Запитів та Відповідей**: Middleware функції отримують як запити, так і відповіді. Вони можуть діставати інформацію з запитів, модифікувати їх чи записувати щось у відповідь.

2. **Аутентифікація та Авторизація**: Middleware часто використовується для перевірки користувачів, надання доступу лише до дозволених маршрутів, керування сесіями та іншим.

3. **Обробка Помилок**: Middleware може бути використане для визначення, залікування та логування помилок у процесі обробки запитів.

4. **Логування та Аналітика**: Middleware функції можуть записувати інформацію про запити та відповіді для подальшого аналізу чи моніторингу.

5. **Маніпуляція Даними**: Middleware може змінювати дані запиту чи відповіді, наприклад, для парсингу JSON-тіл, обробки файлів чи інших схожих задач.

6. **Кастомізація Потоку Даних**: Дає можливість вставляти логіку чи зміни у потік запитів, завдяки чому можна реалізувати специфічні вимоги бізнес-логіки.

У Node.js та Express middleware реалізується у вигляді функцій, які приймають три параметри: `req` (об'єкт запиту), `res` (об'єкт відповіді) та `next` (функція, що вказує на наступну middleware-функцію в потоці). Це дозволяє будувати послідовність обробки запиту з можливістю передавати управління від однієї middleware до іншої. 

Приклад базового middleware у Express:

```javascript
app.use((req, res, next) => {
  console.log(`${req.method} ${req.path}`);
  next();
});
```

Тут `console.log` буде друкувати метод і шлях кожного запиту, який приходить на сервер, і за допомогою `next()` управління передається наступній middleware-функції у черзі.

| Back | Forward |
|---|---|
| [Explain multi-threading capabilities](/ua/junior/nodejs/explain-multithreading-capabilities.md)  | [Transition between middleware layers](/ua/junior/nodejs/transition-between-middleware-layers.md) |