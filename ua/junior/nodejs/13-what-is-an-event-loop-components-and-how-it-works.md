#### 13. Що таке event loop? З яких компонентів складається і як працює?

**Event Loop** (цикл подій) - це механізм в середовищах, таких як Node.js або браузери, який дозволяє виконувати неблокуючий ввід/вивід, обробляючи асинхронні операції. Event Loop управляє взаємодією між стеком викликів, чергою повідомлень та іншими компонентами, забезпечуючи асинхронне виконання коду.

### Компоненти Event Loop:

1. **Стек викликів (Call Stack)**: 
   - Це структура даних, де зберігаються всі виклики функцій, які потрібно виконати. Коли функція викликається, вона додається на стек. Коли функція завершена, вона видаляється зі стека.
   
2. **Черга повідомлень (Callback Queue/Message Queue)**:
   - Це черга, в яку потрапляють колбеки (функції зворотного виклику) асинхронних подій, які завершились, але ще не потрапили на стек викликів для виконання.
   
3. **Event Loop**:
   - Процес, який постійно перевіряє стек викликів та чергу повідомлень. Якщо стек порожній, event loop забирає першу функцію з черги повідомлень і додає її у стек викликів для виконання.

4. **Системні API**:
   - Використовуються для виконання операцій, таких як робота з файловою системою або мережевими запитами. Зазвичай ці API передають обробку операцій на рівень системи, залишаючи Node.js чекати події.

5. **Task Queue**:
   - Спеціальна черга для microtasks, яку також можна вважати частиною event loop. До microtasks відносяться такі асинхронні операції, як обробка промісів (`Promise`).

### Як працює Event Loop:

1. **Початок виконання**:
   - JavaScript починає виконувати код основного потоку (за винятком асинхронних функцій), заповнюючи стек викликів під час викликів функцій.

2. **Асинхронні операції**:
   - Коли під час виконання коду відбувається асинхронна операція (такі як мережевий запит або таймери), вона передається системним API і продовження коду не блокується.

3. **Колбеки**:
   - Коли асинхронна задача завершується, її колбек додається у чергу повідомлень.

4. **Цикл подій**:
   - Event Loop перевіряє чи порожній стек викликів. Якщо порожній, він витягує колбек з черги повідомлень та додає його на стек для виконання.

5. **Microtasks**:
   - Під час проходу event loop пріоритетно обробляються всі мікрозадачі перед переходом до макрозадач з черги.

Таким чином, Event Loop забезпечує неперервність виконання JavaScript-коду, керуючи асинхронними операціями та відмінно вписуючись в архітектуру однопоточного моделі виконання цієї мови.

| Back | Forward |
|---|---|
| [Які види стримів ви знаєте?](/ua/junior/nodejs/what-types-of-streams-do-you-know.md)  | [Що таке логування і моніторинг?](/ua/junior/nodejs/what-is-logging-and-monitoring.md) |