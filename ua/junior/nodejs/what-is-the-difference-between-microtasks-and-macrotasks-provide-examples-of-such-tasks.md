#### 10. Яка різниця між microtasks і macrotasks? Наведіть приклади таких завдань.

У Node.js (та в JavaScript загалом) мікрозавдання (microtasks) і макрозавдання (macrotasks) використовуються в черзі подій (event loop), і вони грають ключову роль у визначенні порядку виконання завдань.

### Micrtasks (Мікрозавдання):
- **Опис:** Мікрозавдання - це завдання, які виконуються після завершення екзекуційного контексту, але перед виконанням наступного макрозавдання. Вони мають вищий пріоритет, ніж макрозавдання.
- **Приклади:** 
  - Проміси (Promises). Коли викликається `Promise.resolve()` або обіцянку вирішено, відповідний `then` обробник потрапляє до черги мікрозавдань.
  - `process.nextTick()`. Це специфічний метод у Node.js, що додає завдання до черги мікрозавдань.

### Macrotasks (Макрозавдання):
- **Опис:** Макрозавдання містять коди, які виконуються після завершення усіх поточних мікрозавдань. Кожен раз, коли черга подій обробляє макрозавдання, вона потім перевіряє чергу мікрозавдань і виконує їх до завершення, перш ніж перейти до наступного макрозавдання.
- **Приклади:** 
  - `setTimeout()`, `setInterval()`. Тимчасові функції, які додають завдання до черги макрозавдань після закінчення визначеного періоду часу.
  - I/O операції. Багато операцій введення-виведення додаються до черги макрозавдань після їх обробки.

### Різниця в порядку виконання:
1. **Мікрозавдання** завжди виконуються після завершення поточного script або макрозавдання і **до** будь-якого очікуваного макрозавдання.
2. Коли виконується черга подій, **весь потік мікрозавдань** завжди буде завершено перед тим, як буде виконано будь-яке нове макрозавдання.

### Приклад:
```javascript
console.log('Start'); // 1

setTimeout(() => {
  console.log('Timeout 1'); // 4
}, 0);

Promise.resolve().then(() => {
  console.log('Promise 1'); // 3
});

process.nextTick(() => {
  console.log('Next Tick'); // 2
});

console.log('End'); // 1
```

У наведеному прикладі, виведення матиме наступний порядок:
1. `Start` і `End` виводяться одразу завдяки синхронному виконанню.
2. `Next Tick` буде виведено перед `Promise 1`, хоча обоє мікрозавдання.
3. `Promise 1` виводиться після `Next Tick`.
4. `Timeout 1` виконується останнім, бо він є макрозавданням.

| Back | Forward |
|---|---|
| [Що таке libuv i v8? Яке їхнє призначення?](/ua/junior/nodejs/what-is-libuv-and-v8-whats-their-purpose.md)  | [Що таке стрим (stream)?](/ua/junior/nodejs/what-is-a-stream.md) |