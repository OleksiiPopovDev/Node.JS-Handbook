#### 168. Чого не вистачає у ESM, що підтримується у CJS?

У ECMAScript Modules (ESM) є декілька обмежень порівняно з CommonJS (CJS):

1. **Завантаження модулів синхронно**:
   - CJS підтримує синхронне `require()`, що дає змогу завантажувати модулі під час виконання скрипта. 
   - ESM використовує асинхронний механізм імпорту модулів, за допомогою `import`, що може бути проблематичним в середовищах, де потрібна синхронність.

2. **Гнучкість в імпорті/експорті**:
   - CJS дозволяє змінювати експортований об'єкт після ініціалізації, оскільки модулі є mutable і кешованими. 
   - В ESM імпорти прагнуть до статичності, а експорт доступний лише через `export` директиви.

3. **Обернені виклики під час завантаження**:
   - В CJS виконання коду та завантаження модулів відбувається без врахування порядку, що дає більше можливостей для обернених викликів.
   - ESM має більш строгий порядок завантаження модулів, що засновується на графіимпортів.

4. **Динамічні імпорти**:
   - CJS дозволяє динамічно визначати модулі, що імпортуються за допомогою звичайного JavaScript коду.
   - ESM для цього пропонує синтаксис `import()`, але статичні імпорти повинні бути визначені у коді заздалегідь.

5. **Доступність `require`, `exports`, та `module.exports`**:
   - У CJS є можливість використовувати `module.exports` та `exports` для експорту, а також `require` для імпорту.
   - В ESM немає доступу до цих об'єктів безпосередньо, що може вимагати рефакторингу коду під час трансформації проекту з CJS в ESM.

Ці обмеження переважно пов'язані зі спробами ESM забезпечити кращу оптимізацію, статичний аналіз і бути більш узгодженим з сучасними парадигмами модульності в JavaScript.

| Back | Forward |
|---|---|
| [Як пов’язані node:async_hooks і AsyncLocalStorage?](/ua/strong-middle/questions-for-a-systems-programmer/what-is-the-relationship-between-asynchooks-and-asynclocalstorage.md)  | [Як стежити за змінами файлів і директорій на диску? Які з цим можуть виникати проблеми?](/ua/strong-middle/questions-for-a-systems-programmer/how-to-monitor-file-and-directory-changes-on-disk-and-what-problems-may-arise.md) |