#### 216. Опишіть дизайн-паттерн SAGA. Яка різниця між транзакцією та операцією компенсації в SAGA, в SOA?

Дизайн-паттерн SAGA — це архітектурний шаблон, який застосовується для управління транзакціями в розподілених системах. Основна ідея цього паттерну полягає в управлінні довготривалими транзакціями шляхом розподілу їх на серію менших, локальних транзакцій, які можуть виконуватися асинхронно та незалежно одна від одної. Кожна з цих транзакцій має відповідну компенсаторну операцію, що дозволяє повернути систему в початковий стан у випадку збою.

### Основні компоненти паттерну SAGA:

1. **Локальні транзакції (LT):** Кожна локальна транзакція змінює стан системи та зберігає свої результати самостійно, без участі централізованого механізму контролю транзакцій.

2. **Операції компенсації:** Для кожної локальної транзакції визначається компенсаторна операція, яка скасовує ефекти цієї транзакції у разі виникнення помилки.

3. **Координація:** Існує певний механізм, що координує виконання транзакцій у межах SAGA, щоб забезпечити досягнення констистентного кінцевого стану системи або виконання компенсацій у разі збою.

### Різниця між транзакцією та операцією компенсації у SAGA:

- **Транзакція:** Це успішна операція, яка змінює стан системи у межах її контрольованої зони. У світі розподілених систем це одна з серії таких операцій, що складають SAGA.

- **Операція компенсації:** Це операція, протилежна транзакції, яка викликається у випадку, якщо одна з транзакцій у SAGA не змогла завершитися успішно. Вона повертає системний стан до щонайменше часткової консистентності, скасовуючи ефекти попередніх вже виконаних транзакцій.

### SAGA в контексті сервісно-орієнтованої архітектури (SOA):

У SOA, де системи складаються з незалежних сервісів, SAGA дозволяє управляти транзакційною консистентністю без централізованого контролю. Кожен сервіс виконує локальні транзакції, тоді як SAGA управляє координацією та, за необхідності, викликом компенсаторних операцій, щоб забезпечити цілісність та узгодженість даних у розподілених середовищах. 

Таким чином, SAGA надає засоби для ефективного оброблення довготривалих транзакцій у розподілених системах, мінімізуючи потребу в глобальних блокуваннях та одночасно забезпечуючи консистентність за допомогою компенсацій.

| Back | Forward |
|---|---|
| [Які показники моніторингу найважливіші?](/ua/senior/architecture/what-are-the-most-important-monitoring-indicators.md)  | [Що таке авторизація та аутентифікація?](/ua/senior/architecture/what-is-authentication-and-authorization.md) |