#### 216. Опишіть дизайн-паттерн SAGA. Яка різниця між транзакцією та операцією компенсації в SAGA, в SOA?

Дизайн-паттерн SAGA є архітектурним підходом до управління транзакціями, які охоплюють декілька мікросервісів або компонентів у розподілених системах. В SAGA, кожна транзакція розбивається на серію менш складних кроків або мікротранзакцій, які виконуються в обмеженому контексті. SAGA гарантує, що навіть якщо частина кроків не виконується, система повернеться в узгоджений стан через виконання операцій компенсації.

### Характеристики SAGA:
1. **Послідовність кроків**: SAGA складається з декількох кроків, де кожен крок є окремою транзакцією.
2. **Операції компенсації**: Для кожного кроку повинна бути визначена операція компенсації, яка "відкочується" крок у випадку його невдалого виконання або невдачі наступного кроку.
3. **Менеджер SAGA**: Він управляє виконанням кроків та операцій компенсації.

### Різниця між транзакцією та операцією компенсації в SAGA:

- **Транзакція:** У SAGA кожен крок є локальною транзакцією, яка має бути атомарною і виконуватись у розподіленому середовищі. Це означає, що кожен сервіс виконує свою частину роботи, що фіксує зміни до своєї локальної бази даних.

- **Операція компенсації:** Ця операція виконується, якщо один із наступних кроків транзакції не може бути завершено. Вона анульовує ефекти попередньої успішної локальної транзакції. Наприклад, якщо кошти були зняті в ході транзакції, операція компенсації може повернути їх на клієнтський рахунок.

### Різниця в SOA (Service-Oriented Architecture):

У SOA, подібно до мікросервісної архітектури, транзакції можуть вимагати взаємодії між кількома службами. Основна відмінність у контексті використання SAGA між SOA та мікросервісами полягає в інтеграції та управлінні, оскільки SOA може використовувати більш централізовані схеми обробки, такі як ESB (Enterprise Service Bus).

1. **Транзакції в SOA:** Зазвичай можуть управлятись централізовано, із сильним типом узгодженості.
2. **Транзакції в SAGA:** Забезпечують слабку узгодженість та децентралізоване управління через розподілені мікросервісні транзакції.

Отже, SAGA забезпечує надійність та узгодженість в системах, що складаються з множини незалежних компонентів, як у розподілених системах мікросервісної архітектури, надаючи спосіб обробки довготривалих транзакцій.

| Back | Forward |
|---|---|
| [Які показники моніторингу найважливіші?](/ua/senior/architecture/what-are-the-most-important-monitoring-indicators.md)  | [Що таке авторизація та аутентифікація?](/ua/senior/architecture/what-are-authentication-and-authorization.md) |