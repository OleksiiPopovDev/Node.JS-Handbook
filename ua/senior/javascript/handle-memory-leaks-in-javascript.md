#### * Handle memory leaks in JavaScript

В JavaScript управління пам'яттю відбувається автоматично через збірку сміття (Garbage Collection). Проте, навіть з цією функціональністю, можуть виникати проблеми з витоками пам'яті. Для їх уникнення можна скористатися кількома порадами:

### 1. Уникайте глобальних змінних

Глобальні змінні лишаються в пам’яті на весь час роботи програми, тому доцільно звести їх кількість до мінімуму.

```javascript
// Погано
var name = "Іван";

// Краще
let name = "Іван"; // обмежте зону видимості
```

### 2. Своєчасно очищуйте таймери та обробники подій

Замініть та очищуйте таймери та обробники подій, коли вони більше не потрібні.

```javascript
// Погано
setInterval(doSomething, 1000);

// Краще
let interval = setInterval(doSomething, 1000);
// ...
clearInterval(interval); // очищення, коли більше не потрібно
```

### 3. Використовуйте "Weak" колекції

`WeakMap` та `WeakSet` добре підходять для зберігання даних, оскільки вони не запобігають збірці сміття на своїх ключах, коли останні стають недосяжними.

```javascript
let weakMap = new WeakMap();
let obj = {};

// Після видалення об'єкту з weakMap він зможе бути очищено з пам'яті
weakMap.set(obj, 'значення');
obj = null;
```

### 4. Уникайте замикань із великою кількістю даних

Якщо замикання містить змінні з великими об'єктами, це може призвести до витоків пам'яті.

```javascript
function createBigDataClosure() {
    let bigData = new Array(1000).fill('Some large data');
    return function() {
        console.log(bigData);
    };
}

let myClosure = createBigDataClosure();
// Використовуйте myClosure лише за потреби та видаляйте посилання
```

### 5. Оцінка та виявлення витоків пам'яті

Нарешті, для виявлення та аналізу витоків пам'яті варто використовувати інструменти розробника в браузері:

- **Google Chrome**: відкрийте DevTools (`F12` або `Ctrl` + `Shift` + `I`), перейдіть на вкладку "Memory", де можна зробити профілювання об’єктів у пам’яті.
- **Mozilla Firefox**: аналагочний підхід з інструментами веб-розробки.

Ці інструменти допоможуть ідентифікувати елементи, які займають пам’ять, та подивитись, звідки саме вони викликаються.

Дотримуючись цих рекомендацій, ви можете оптимізувати використання пам'яті у ваших JavaScript додатках та зменшити ризик витоків пам'яті.

| Back | Forward |
|---|---|
| [Use advanced JavaScript design patterns (Observer, Singleton, Factory)](/ua/senior/javascript/use-advanced-javascript-design-patterns.md)  | [Optimize async systems](/ua/senior/javascript/optimizing-asynchronous-systems.md) |