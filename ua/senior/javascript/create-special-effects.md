#### * Design custom decorators

У JavaScript, декоратори означають синтаксис, який дозволяє додавати поведінку до класів або їхніх властивостей у простий і зрозумілий спосіб. Хоча в JavaScript (станом на жовтень 2023) декоратори ще не стандартизовані, їх можна використовувати з допомогою Babel або TypeScript. Нижче наведено приклад, як створити простий кастомний декоратор.

### Приклад створення кастомного декоратора

1. **Бібліотеки і налаштування**: Для того, щоб мати змогу експериментувати з декораторами, може знадобитися налаштувати Babel або TypeScript з відповідними фічами.

2. **Створення декоратора**:

Ось приклад декоратора, який логуватиме кожен виклик метода.

```javascript
function log(target, key, descriptor) {
  const originalMethod = descriptor.value;

  // Змінюємо метод, щоб додати логування
  descriptor.value = function(...args) {
    console.log(`Викликається ${key} з аргументами: ${JSON.stringify(args)}`);
    const result = originalMethod.apply(this, args);
    console.log(`Результат: ${result}`);
    return result;
  };

  return descriptor;
}
```

3. **Застосування декоратора**:

Використовуйте декоратор до метода класу.

```javascript
class MathOperations {
  @log
  add(a, b) {
    return a + b;
  }
}

const math = new MathOperations();
math.add(2, 3);
// Виводиться у консоль:
// Викликається add з аргументами: [2,3]
// Результат: 5
```

### Як це працює

- `log` — це функція декоратора, яка отримує три параметри:
  - `target` — прототип класу у випадку метода.
  - `key` — ім'я метода.
  - `descriptor` — дескриптор властивості.
- Ми зберігаємо оригінальний метод у змінній `originalMethod`.
- Перевизначаємо метод, додаємо логіку, потім викликаємо і повертаємо результат оригінального метода.

### Зауваження

- **Стандартизація**: Декоратори знаходяться в статусі пропозиції (proposal) у TC39, що означає, що специфікація може змінюватися.
- **Сумісність**: Для розробки з декораторами наразі часто використовують компілятори, як-от Babel або TypeScript.
- **Використання**: Декоратори можуть бути дуже корисними для повторного використання коду та додавання метаданих або поведінок без зміни основної логіки.

Цей специфічний синтаксис може значно полегшити та зробити більш зрозумілим етапи розробки класів та методів.

| Back | Forward |
|---|---|
| [Write advanced polyfills for compatibility](/ua/senior/javascript/write-modern-browser-polyfills.md)  | [Design reusable modules](/ua/senior/javascript/design-reusable-modules.md) |