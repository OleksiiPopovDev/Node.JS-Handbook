#### 5. Яким чином Node.js сервер здатен обробляти одночасно багато паралельних запитів від клієнтів, маючи лише один thread?

**Спочатку потрібно розуміти що Node.js є імперативною багатозадачною мовою програмування**, яка використовує вбудований в її інтерпретатор мережний стек для обробки мережових запитів. Імперативність означає, що кожен блок коду виконується послідовно, але Node.js здатна виконувати декілька блоків коду одночасно за допомогою механізму **Non-Blocking I/O**.

Після отримання запиту клієнта від сервера Node.js не зупиняється очікувати закінчення обробки цього запиту, а натомість продовжує виконання інших завдань. Коли запит завершується, він знову повертає увагу до нього і продовжує виконувати його. Для організації та контролю виконання декілька завдань використовуються бібліотеки такі як **libuv** або **kqueue**, які забезпечують механізми багатозадачності на рівні ОС.

Також для обробки одночасних запитів Node.js використовує концепцію **Event Loop**, який працює як середній рівень між процесором та мережевими операціями. Коли клієнт здійснює запит до сервера, він створює окремий об'єкт із яким сервер може продовжувати виконання своїх завдань навіть тоді коли очікує закінчення обробки цього запиту.

Приклад на Node.js:

```javascript
const http = require('http');

const server = http.createServer((req, res) => {
    console.log('Запит від клієнта...');
    
    // Налаштовує обробник який буде виконувати задачу декілька разів при отриманні кожного окремого запиту.
    for (let i = 0; i < req.headers['content-length']; i++) {
        // Виконується кожне виконання завдання без зупинки на очікування закінчення попереднього.
        setTimeout(() => {
            console.log(`Запит обробляється...`)
        }, Math.random() * 100);
    }
    
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end('OK\n');
});

server.listen(3000, () => {
    console.log('Сервер почав роботу...');
});
```

В цьому прикладі кожного виконання завдання відбувається окремо протягом декількох секунд від попереднього виконання та продовжує виконувати свої функції навіть тоді коли очікує закінчення попереднього виконання завдання.

Отже, Node.js здатний обробляти одночасно багато паралельних запитів клієнтів із однією потокою завдяки своїм спеціальним механізмам багатозадачності такі як **Non-Blocking I/O**, **Event Loop** та бібліотеки управління виконанням завдань.

| Попереднє питання | Наступне питання |
|---|---|
| [4. Які в Node.js головні компоненти?](./junior/nodejs/what-are-the-main-components-of-nodejs.md)  | [6. Чи можливо використовувати кілька потоків (threads)? За допомогою яких модулів це реалізовано?](./junior/nodejs/is-multithreading-possible-which-modules-implement-it.md) |